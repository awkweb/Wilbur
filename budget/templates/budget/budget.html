{% extends 'base_navbar.html' %}

{% load humanize %}

{% block title %}{{ title }}{% endblock %}

{% block content %}

    {% if budget %}
        <div class="row">
            <div class="col-sm-12">
                <h2>Total spent for {% now "F" %} <small>{{ spent_percentage|floatformat:1 }}%</small></h2>
            </div>
        </div>

        {% include 'includes/budget_overview.html' %}

        <div class="row">
            <div class="col-sm-12">
                <h2>Items</h2>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                {% if item_list|length > 0 %}
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th width="250">Type</th>
                            <th width="250">Spent</th>
                            <th width="250">Total</th>
                            <th width="250">Percent</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for item in item_list %}
                            <tr>
                                <td>
                                    <a href="{% url 'budget:edit-item' item.0 %}">{{ item.1|capfirst }}</a>
                                </td>
                                <td>{{ item.3 }}</td>
                                <td>{{ item.2 }}</td>
                                <td>{{ item.4|floatformat:1 }}%</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <h4>No budget items.</h4>
                {% endif %}
            </div>
        </div>
    {% else %}
        <div class="row">
            <div class="col-sm-12">
                <h4>No budget exists. <a href="{% url 'budget:add-budget' %}">Create a budget.</a></h4>
            </div>
        </div>
    {% endif %}

{% endblock %}
